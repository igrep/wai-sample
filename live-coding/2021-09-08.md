# Haskellによるライブコーディング #8 AcceptリクエストヘッダーでContent-Typeレスポンスヘッダーを決める

実際に配信した動画: <https://www.youtube.com/watch?v=o6HxOP7UFcE>

## 📈本日の主な進捗

先週導入した`mime-type`パッケージを使用して、クライアントから取得したAcceptリクエストヘッダーでContent-Typeレスポンスヘッダーや、生成するレスポンスボディーを切り替える処理を書きました。その際、従来の型クラスの仕様上、実際に`Handler`を実行して`resObj`を作成してからAcceptリクエストヘッダーでレスポンスボディーのMIME Type（の候補）を決める、という手順になってしまうので、`Handler`は生成できるすべての種類の`resObj`を作らなければならず、効率が悪くなる可能性がある、と判断し、`resObj`の型からMIME Typeの候補を提示できるよう修正しました。

## ℹ️補足情報

今回は設計を考えるのに手こずったせいもあってありません！

## 次回

なぜかクライアントのコードを生成するTemplate Haskellで型エラーが発生しているので直しましょう。それから、実際に複数のContent-Typeに変換しうる型を作って変換してみます。
